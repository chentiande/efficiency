


## 实体元模型

type EntityMetaModel struct {
	ID         string
	Code       string
	Name       string
	Category   EntityCategory    （业务/基础/配置/聚合）
	Attributes []*Attribute
	Constraints []*Rule
	Lifecycle  *Lifecycle
}

type EntityCategory string

const (
	EntityCategoryBusiness EntityCategory = "BUSINESS"
	EntityCategoryBase     EntityCategory = "BASE"
	EntityCategoryConfig   EntityCategory = "CONFIG"
	EntityCategoryAggregate EntityCategory = "AGGREGATE"
)

type Attribute struct {
	Code        string
	Name        string
	DataType    DataType
	Nullable    bool
	Default     any
	SemanticTag string
	Validations []Rule
}

type DataType string

const (
	DataTypeString  DataType = "STRING"
	DataTypeInt     DataType = "INT"
	DataTypeDecimal DataType = "DECIMAL"
	DataTypeBool    DataType = "BOOL"
	DataTypeDate    DataType = "DATE"
	DataTypeRef     DataType = "REFERENCE"
)


## 关系元模型

type RelationType struct {
	ID            string
	Code          string
	Name          string
	Kind          RelationKind
	Source        *EntityType
	Target        *EntityType
	Cardinality   Cardinality
	Directional   bool
	Rules         []*Rule
	Behaviors     []RelationBehavior
}


type RelationKind string

const (
	RelationAssociation RelationKind = "ASSOCIATION" // 关联
	RelationComposition RelationKind = "COMPOSITION" // 组合
	RelationAggregation RelationKind = "AGGREGATION" // 聚合
	RelationInheritance RelationKind = "INHERITANCE" // 继承
	RelationDependency  RelationKind = "DEPENDENCY"  // 依赖
	RelationConstraint  RelationKind = "CONSTRAINT"  // 规则/约束
)

type Cardinality string

const (
	OneToOne   Cardinality = "1:1"
	OneToMany Cardinality = "1:N"
	ManyToMany Cardinality = "N:M"
)


type RuleScope string

const (
	RuleScopeAttribute RuleScope = "ATTRIBUTE"
	RuleScopeEntity    RuleScope = "ENTITY"
	RuleScopeRelation  RuleScope = "RELATION"
)

type Rule struct {
	Code        string
	Description string
	Scope       RuleScope
	Expression  RuleExpression
}

type Lifecycle struct {
	States      []string
	Initial     string
	Transitions []StateTransition
}

type StateTransition struct {
	From   string
	To     string
	Rule   *Rule
}
